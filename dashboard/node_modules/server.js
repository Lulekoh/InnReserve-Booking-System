const express = require('express');
const app = express();

const dbconfig = require('./db');
const port = process.env.PORT || 5000;

app.listen(port, () => console.log('Node Server Started'));

const sgMail = require('@sendgrid/mail');
sgMail.setApiKey('your-sendgrid-api-key');

app.post('/book', (req, res) => {
  // Save booking to database

  const msg = {
    to: req.body.email,
    from: 'your-email@example.com',
    subject: 'Booking Confirmation',
    text: 'Your booking has been confirmed!',
  };

  sgMail.send(msg).then(() => {
    res.send('Booking received and email sent');
  }).catch((error) => {
    console.error(error);
    res.status(500).send('Error sending email');
  });
});

